-- Schema for embedded H2 database: users table used by AppUser entity
-- Spring Data JDBC quotes identifiers ("users"."ID"...), so we create uppercase column names.
CREATE TABLE IF NOT EXISTS users (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USERNAME VARCHAR(100) NOT NULL UNIQUE,
  PASSWORD VARCHAR(255) NOT NULL,
  ROLES VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS members (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USER_ID BIGINT NOT NULL UNIQUE,
  FIRST_NAME VARCHAR(80) NOT NULL,
  LAST_NAME VARCHAR(80) NOT NULL,
  PHONE VARCHAR(30),
  BIRTH_DATE DATE,
  ACTIVE BOOLEAN DEFAULT TRUE,
  CONSTRAINT FK_MEMBERS_USER FOREIGN KEY (USER_ID) REFERENCES users(ID)
);
